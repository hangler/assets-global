// d3.tip
// Copyright (c) 2013 Justin Palmer
//
// Tooltips for d3.js SVG visualizations

(function(e,t){if(typeof define==="function"&&define.amd){define(["d3"],t)}else{e.d3.tip=t(e.d3)}})(this,function(e){return function(){function a(e){s=x(e);o=s.createSVGPoint();document.body.appendChild(i)}function f(){return"n"}function l(){return[0,0]}function c(){return" "}function d(){var e=T();return{top:e.n.y-i.offsetHeight,left:e.n.x-i.offsetWidth/2}}function v(){var e=T();return{top:e.s.y,left:e.s.x-i.offsetWidth/2}}function m(){var e=T();return{top:e.e.y-i.offsetHeight/2,left:e.e.x}}function g(){var e=T();return{top:e.w.y-i.offsetHeight/2,left:e.w.x-i.offsetWidth}}function y(){var e=T();return{top:e.nw.y-i.offsetHeight,left:e.nw.x-i.offsetWidth}}function b(){var e=T();return{top:e.ne.y-i.offsetHeight,left:e.ne.x}}function w(){var e=T();return{top:e.sw.y,left:e.sw.x-i.offsetWidth}}function E(){var e=T();return{top:e.se.y,left:e.e.x}}function S(){var t=e.select(document.createElement("div"));t.style({position:"absolute",top:0,opacity:0,"pointer-events":"none","box-sizing":"border-box"});return t.node()}function x(e){e=e.node();if(e.tagName.toLowerCase()==="svg")return e;return e.ownerSVGElement}function T(){var t=u||e.event.target,n={},r=t.getScreenCTM(),i=t.getBBox(),s=i.width,a=i.height,f=i.x,l=i.y;o.x=f;o.y=l;n.nw=o.matrixTransform(r);o.x+=s;n.ne=o.matrixTransform(r);o.y+=a;n.se=o.matrixTransform(r);o.x-=s;n.sw=o.matrixTransform(r);o.y-=a/2;n.w=o.matrixTransform(r);o.x+=s;n.e=o.matrixTransform(r);o.x-=s/2;o.y-=a/2;n.n=o.matrixTransform(r);o.y+=a;n.s=o.matrixTransform(r);return n}var t=f,n=l,r=c,i=S(),s=null,o=null,u=null;a.show=function(){var s=Array.prototype.slice.call(arguments);if(s[s.length-1]instanceof SVGElement)u=s.pop();var o=r.apply(this,s),f=n.apply(this,s),l=t.apply(this,s),c=e.select(i),d=p.length,v,m=document.documentElement.scrollTop||document.body.scrollTop,g=document.documentElement.scrollLeft||document.body.scrollLeft;c.html(o).style({opacity:1,"pointer-events":"all"});while(d--)c.classed(p[d],false);v=h.get(l).apply(this);c.classed(l,true).style({top:v.top+f[0]+m+"px",left:v.left+f[1]+g+"px"});return a};a.hide=function(){var t=e.select(i);t.style({opacity:0,"pointer-events":"none"});return a};a.attr=function(t,n){if(arguments.length<2&&typeof t==="string"){return e.select(i).attr(t)}else{var r=Array.prototype.slice.call(arguments);e.selection.prototype.attr.apply(e.select(i),r)}return a};a.style=function(t,n){if(arguments.length<2&&typeof t==="string"){return e.select(i).style(t)}else{var r=Array.prototype.slice.call(arguments);e.selection.prototype.style.apply(e.select(i),r)}return a};a.direction=function(n){if(!arguments.length)return t;t=n==null?n:e.functor(n);return a};a.offset=function(t){if(!arguments.length)return n;n=t==null?t:e.functor(t);return a};a.html=function(t){if(!arguments.length)return r;r=t==null?t:e.functor(t);return a};var h=e.map({n:d,s:v,e:m,w:g,nw:y,ne:b,sw:w,se:E}),p=h.keys();return a}})